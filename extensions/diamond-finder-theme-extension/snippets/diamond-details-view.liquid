<!-- Diamond Details View (initially hidden) -->
<!-- Pre-load certificate images for JavaScript access -->
<script>
  window.CERTIFICATE_IMAGES = {
    GIA: '{{ "/" | append: "GIA.jpg" | asset_url }}',
    IGI: '{{ "/" | append: "IGI.jpg" | asset_url }}',
    HRD: '{{ "/" | append: "HRD.jpg" | asset_url }}',
  };

  // Pre-load carat sizer asset URLs
  window.CARAT_SIZER_ASSETS = {
    hand: '{{ "/" | append: "hand.jpg" | asset_url }}',
    ring: '{{ "/" | append: "ring.png" | asset_url }}',
    claw: '{{ "/" | append: "claw.png" | asset_url }}',
    shapes: {
      round: '{{ "/" | append: "round.png" | asset_url }}',
      princess: '{{ "/" | append: "princess.png" | asset_url }}',
      emerald: '{{ "/" | append: "emerald.png" | asset_url }}',
      asscher: '{{ "/" | append: "asscher.png" | asset_url }}',
      cushion: '{{ "/" | append: "cushion.png" | asset_url }}',
      oval: '{{ "/" | append: "oval.png" | asset_url }}',
      marquise: '{{ "/" | append: "marquise.png" | asset_url }}',
      pear: '{{ "/" | append: "pear.png" | asset_url }}',
      radiant: '{{ "/" | append: "radiant.png" | asset_url }}',
      diamond: '{{ "/" | append: "diamond.png" | asset_url }}',
    },
  };

  // Override the getAssetUrl function with proper Shopify asset URLs
  if (!window.DiamondUtils) {
    window.DiamondUtils = {};
  }

  window.DiamondUtils.getAssetUrl = function (path) {
    // Extract just the filename from any path
    const filename = path
      .split('/')
      .pop()
      .replace(/\.(png|webp|jpg)$/, '');

    // Check shapes first
    if (window.CARAT_SIZER_ASSETS.shapes[filename]) {
      return window.CARAT_SIZER_ASSETS.shapes[filename];
    }

    // Check other carat sizer assets
    if (window.CARAT_SIZER_ASSETS[filename]) {
      return window.CARAT_SIZER_ASSETS[filename];
    }

    return path;
  };
</script>
<div id='diamond-details-view' class='tw-hidden'>
  <div class='tw-max-w-[90rem] tw-mx-auto tw-p-6'>
    <div class='tw-mb-4'>
      <button
        id='back-to-gallery'
        class='tw-inline-flex tw-items-center tw-text-gray-600 hover:tw-text-gray-800 tw-text-lg tw-cursor-pointer'
      >
        <svg
          class='tw-w-5 tw-h-5 tw-mr-2 tw-mt-0.5'
          xmlns='http://www.w3.org/2000/svg'
          fill='none'
          viewBox='0 0 24 24'
          stroke='currentColor'
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
        Tillbaka
      </button>
    </div>
    <div class='tw-grid tw-grid-cols-1 lg:tw-grid-cols-2 tw-gap-16'>
      <!-- Left side - Diamond Media with Vertical Tabs -->
      <div class='tw-w-full tw-flex tw-gap-4'>
        <!-- Vertical Tab Navigation -->
        <div class='tw-flex tw-flex-col tw-gap-3 tw-w-24'>
          <button
            id='tab-3d-video'
            class='tw-w-20 tw-h-20 tw-border tw-rounded-lg tw-bg-white tw-flex tw-items-center tw-justify-center tw-p-2 hover:tw-border-gray-400 tw-hidden tw-transition-colors tw-duration-200'
          >
            <img src='{{ '360.png' | asset_url }}' alt='360° View' class='tw-w-16 tw-h-16' width='128' height='128'>
          </button>
          <button
            id='tab-image'
            class='tw-w-20 tw-h-20 tw-border tw-border-gray-600 tw-rounded-lg tw-bg-white tw-flex tw-items-center tw-justify-center tw-p-2 hover:tw-border-gray-400 tw-transition-colors tw-duration-200'
          >
            <div
              id='tab-image-preview'
              class='tw-w-16 tw-h-16 tw-bg-gray-100 tw-rounded-sm tw-flex tw-items-center tw-justify-center'
            >
              <!-- Small diamond image preview will be populated by JavaScript -->
            </div>
          </button>
          <button
            id='tab-certificate'
            class='tw-w-20 tw-h-20 tw-border tw-rounded-lg tw-bg-white tw-flex tw-items-center tw-justify-center tw-p-2 hover:tw-border-gray-400 tw-hidden tw-transition-colors tw-duration-200'
          >
            <div id='tab-certificate-preview' class='tw-w-16 tw-h-16 tw-flex tw-items-center tw-justify-center'>
              <!-- Certificate image preview will be populated by JavaScript -->
            </div>
          </button>
          <button
            id='tab-carat-sizer'
            class='tw-w-20 tw-h-20 tw-border tw-rounded-lg tw-bg-white tw-flex tw-items-center tw-justify-center tw-p-2 hover:tw-border-gray-400 tw-transition-colors tw-duration-200'
          >
            <img
              src='{{ "/" | append: "hand.jpg" | asset_url }}'
              alt='Carat Sizer'
              class='tw-w-14 tw-h-14 tw-object-contain'
              width='56'
              height='56'
            >
          </button>
        </div>

        <!-- Tab Content -->
        <div class='tw-flex-1 tw-aspect-square tw-max-w-[500px] tw-bg-white tw-border tw-rounded-lg tw-overflow-hidden'>
          <!-- 3D Viewer / Video Tab -->
          <div id='content-3d-video' class='tw-w-full tw-h-full tw-hidden'>
            <div id='diamond-3d-viewer' class='tw-w-full tw-h-full tw-flex tw-items-center tw-justify-center'>
              <!-- 3D viewer or video will be populated by JavaScript -->
            </div>
          </div>

          <!-- Image Tab -->
          <div id='content-image' class='tw-w-full tw-h-full'>
            <div
              id='diamond-details-image'
              class='tw-w-full tw-h-full tw-flex tw-items-center tw-justify-center tw-bg-white tw-rounded-lg tw-p-4'
            >
              <!-- Image or SVG will be populated by JavaScript -->
            </div>
          </div>

          <!-- Certificate Tab -->
          <div
            id='content-certificate'
            class='tw-w-full tw-h-full tw-hidden tw-flex tw-items-center tw-justify-center tw-bg-gray-50'
          >
            <div id='diamond-certificate' class='tw-text-center'>
              <!-- Certificate content will be populated by JavaScript -->
            </div>
          </div>

          <!-- Carat Sizer Tab -->
          <div
            id='content-carat-sizer'
            class='tw-w-full tw-h-full tw-hidden tw-flex tw-flex-col tw-items-center tw-justify-center tw-p-4'
          >
            <div class='carat-sizer-container tw-w-full'>
              <!-- Hand with ring and diamond -->
              <div class='carat-hand-container'>
                <img src='{{ "/" | append: "hand.jpg" | asset_url }}' alt='Hand' class='carat-hand-image' width='400' height='300'>

                <!-- Ring container positioned on ring finger -->
                <div class='carat-ring-container'>
                  <img src='{{ "/" | append: "ring.png" | asset_url }}' alt='Ring' class='carat-ring-image' width='100' height='100'>

                  <!-- Diamond and claws container -->
                  <div class='carat-diamond-container'>
                    <img
                      id='carat-diamond'
                      src='{{ "/" | append: "round.png" | asset_url }}'
                      alt='Diamond'
                      class='carat-diamond-image'
                      width='50'
                      height='50'
                    >
                    <div class='ring-claws' id='carat-claws'>
                      <!-- Claws will be populated by JavaScript -->
                    </div>
                  </div>
                </div>
              </div>

              <!-- Slider -->
              <div class='carat-slider-container'>
                <div id='carat-sizer-slider'></div>
                <div class='carat-slider-labels'>
                  <span>0.18ct</span>
                  <span>3.00ct</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right side - Diamond Details -->
      <div class='tw-flex tw-flex-col'>
        <div class='tw-flex tw-items-center tw-justify-between tw-mb-4 -tw-mt-1.5'>
          <h1 id='diamond-details-title' class='tw-text-3xl tw-font-medium tw-text-gray-800 tw-mb-2'>
            <!-- Title will be populated by JavaScript -->
          </h1>
          <p id='diamond-details-price' class='tw-text-2xl tw-font-medium tw-text-gray-800'>
            <!-- Price will be populated by JavaScript -->
          </p>
        </div>

        <div id='diamond-details-specs' class='tw-space-y-2 tw-divide-y tw-divide-gray-200'>
          <!-- Specifications will be populated by JavaScript -->
        </div>

        <!-- Add to Cart Button -->
        <div class='tw-mt-8'>
          <button
            id='add-to-cart-button'
            class='tw-w-full tw-bg-black tw-text-white tw-py-3 tw-px-6 tw-rounded-md hover:tw-bg-gray-800 tw-transition-colors tw-font-medium tw-text-lg'
          >
            Lägg till i kundvagn
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
